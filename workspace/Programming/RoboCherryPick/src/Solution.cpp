/*
 * Solution.cpp
 *
 *  Created on: 08-Jan-2022
 *      Author: yegnesh
 */

// For each move there are 9 possible moves of Robots 1 and 2
// Find the max cherries that can be collected for each of the 9
// moves and add up to the current.

// Exe size: 94360 b

#include <iostream>
#include <vector>

using namespace std;

class Solution {
public:
	int maxRows;
	int maxCols;
	int lookup[70][70][70];

	int MaxCherries(vector<vector<int>>& grid, int row, int col1, int col2) {
		if (col2 > maxCols || col1 > maxCols || row > maxRows) // Invalid move
			return 0;
		if (col1 < 0 || col2 < 0 || row < 0)
			return 0;

		int cherries;
		if (col1 != col2)
			cherries = grid[row][col1] + grid[row][col2];
		else
			cherries = grid[row][col1];

		vector<int> possiblePickups;
		int index[9][3] = {
				{row + 1, col1 - 1, col2 - 1}, // DOWN LEFT - DOWN LEFT
				{row + 1, col1 - 1, col2}, // DOWN LEFT - DOWN
				{row + 1, col1 - 1, col2 + 1},// DOWN LEFT - DOWN RIGHT

				{row + 1, col1, col2 - 1}, // DOWN - DOWN LEFT
				{row + 1, col1, col2}, // DOWN - DOWN
				{row + 1, col1, col2 + 1}, // DOWN - DOWN RIGHT

				{row + 1, col1 + 1, col2 - 1}, // DOWN RIGHT - DOWN LEFT
				{row + 1, col1 + 1, col2}, // DOWN RIGHT - DOWN
				{row + 1, col1 + 1, col2 + 1}, // DOWN RIGHT - DOWN RIGHT
		};
		int maxC = 0;

		for (int i = 0; i < 9; i++) {
			int r, c1, c2;

			r = index[i][0];
			c1 = index[i][1];
			c2 = index[i][2];
			if (r < 0 || c1 < 0 || c2 < 0)
				continue;
			else if (lookup[r][c1][c2] == -1) // First time calculation
				lookup[r][c1][c2] = MaxCherries(grid, r, c1, c2);
			maxC = max(maxC, lookup[r][c1][c2]);
		}

		cherries += maxC;
		return cherries;
	}

    int cherryPickup(vector<vector<int>>& grid) {
    	maxRows = grid.size() - 1;
    	maxCols = grid[0].size() - 1;
    	fill(&lookup[0][0][0], &lookup[69][69][69], -1);
    	return MaxCherries(grid, 0, 0, maxCols);
    }
};

int main()
{
	vector<vector<vector<int>>> t = {
			{
					{3, 1, 1},
					{2, 5, 1},
					{1, 5, 5},
					{2, 1, 1},
			},
			{
					{1, 0, 0, 0, 0, 0, 1},
					{2, 0, 0, 0, 0, 3, 0},
					{2, 0, 9, 0, 0, 0, 0},
					{0, 3, 0, 5, 4, 0, 0},
					{1, 0, 2, 3, 0, 0, 6},
			},
			{
					{8, 8, 10, 9, 1, 7},
					{8, 8, 1, 8, 4, 7},
					{8, 6, 10, 3, 7, 7},
					{3, 0, 9, 3, 2, 7},
					{6, 8, 9, 4, 2, 5},
					{1, 1, 5, 8, 8, 1},
					{5, 6, 5, 2, 9, 9},
					{4, 4, 6, 2, 5, 4},
					{4, 4, 5, 3, 1, 6},
					{9, 2, 2, 1, 9, 3},
			},
			{
					{73,38,73,59,24,85,81,12,25,14,58,48,13,82,29,2,80,15,99,36,76,65,34,20,31,25,66,36,11,52,7,15,43,27,99,14,38,32,1,79,94,74,100,60,25,2,81,90,54,7},
					{37,81,42,0,25,40,18,6,91,21,7,93,40,62,59,26,10,65,41,59,8,37,4,48,2,92,96,16,52,21,51,13,11,61,33,2,0,94,49,79,61,40,19,37,13,38,76,100,22,20},
					{81,56,48,62,28,63,29,96,35,26,4,26,40,81,69,84,86,39,30,23,34,0,15,49,90,82,77,88,68,94,22,6,93,72,96,85,89,69,33,31,89,50,18,98,90,10,76,15,0,6},
					{57,99,21,94,62,51,53,8,62,65,5,20,74,76,25,37,71,49,72,55,87,69,51,2,12,82,26,47,74,49,99,47,50,98,95,2,2,87,6,72,26,9,84,72,4,47,84,87,73,71},
					{34,72,12,10,98,83,46,40,44,53,71,65,96,9,84,5,96,12,88,34,36,86,35,22,30,83,15,38,92,29,15,88,55,96,11,64,3,23,46,74,39,18,60,29,27,45,25,8,77,97},
					{34,1,78,4,63,36,64,82,85,58,3,33,54,38,34,62,51,45,70,64,59,99,18,62,49,95,65,49,3,46,56,71,94,9,2,80,36,28,40,88,11,24,88,45,94,50,84,92,70,93},
					{71,79,4,16,35,24,55,84,44,37,3,75,61,29,32,75,20,63,80,53,27,3,85,76,75,29,90,77,55,75,26,47,56,31,77,50,40,80,3,32,7,66,17,95,59,15,95,10,1,29},
					{96,94,12,34,12,96,89,20,85,80,90,45,11,52,11,36,41,62,36,18,83,26,17,100,32,83,38,35,73,69,26,13,89,32,28,87,20,26,98,57,95,53,53,74,61,31,97,97,58,85},
					{59,25,80,1,83,4,12,40,36,63,63,47,23,94,21,14,72,60,49,91,81,11,59,31,21,92,74,9,66,65,91,31,45,73,62,57,56,45,46,76,36,98,23,87,53,16,55,95,9,26},
					{4,97,2,84,21,25,21,10,76,99,93,64,1,50,50,27,98,60,5,14,41,18,51,81,84,18,82,75,71,55,17,28,28,15,38,87,12,40,47,98,56,69,40,9,66,34,76,75,83,24},
					{34,92,84,34,35,59,29,81,90,4,42,66,92,32,5,15,13,9,15,0,55,61,97,95,54,21,51,19,6,80,10,75,62,20,93,98,15,10,87,40,72,48,68,32,11,45,23,61,39,57},
					{33,5,87,14,18,63,53,48,11,63,3,20,6,10,72,66,31,75,14,48,14,78,29,31,37,96,33,92,76,94,82,4,4,68,22,100,65,40,48,22,50,71,67,51,23,24,8,15,74,60},
					{57,11,48,82,31,30,1,2,9,92,28,85,24,33,61,96,48,56,42,65,39,45,31,17,97,49,2,50,53,60,68,58,96,89,19,37,91,22,100,3,63,93,93,60,74,42,93,13,4,45},
					{98,41,70,52,0,24,91,65,44,16,18,23,12,10,12,79,33,39,14,1,12,52,92,65,3,38,38,69,60,2,91,49,59,69,26,0,12,51,59,38,58,20,13,35,3,94,60,44,68,91},
					{53,28,18,89,78,18,88,75,80,29,70,36,52,37,31,46,46,64,32,74,55,2,44,8,4,65,75,98,64,65,88,55,51,97,56,2,11,1,17,74,0,45,79,83,64,63,98,42,96,21},
					{66,20,33,69,77,67,46,97,33,76,14,14,92,11,63,36,61,92,23,28,58,23,73,35,10,1,81,66,8,45,66,26,21,47,85,68,7,94,63,75,85,5,77,52,28,29,36,40,88,84},
					{86,83,81,81,46,92,90,58,20,78,10,92,46,61,53,85,1,95,73,7,28,75,2,23,26,86,65,47,92,84,32,15,86,42,49,17,56,24,85,59,38,66,28,33,83,57,93,53,72,47},
					{24,74,65,88,79,31,29,62,81,84,2,53,10,70,87,65,12,62,29,28,13,31,52,28,50,22,43,10,44,53,6,34,2,72,68,54,52,77,1,10,18,87,50,97,68,96,43,78,7,55},
					{91,50,12,5,65,60,38,72,88,33,83,23,31,86,92,36,79,34,99,13,17,97,27,61,28,22,96,64,22,50,27,13,89,88,74,2,86,14,4,96,13,82,49,97,1,97,8,60,9,81},
					{43,43,68,4,3,96,92,60,17,100,56,27,72,66,45,69,15,24,100,15,79,90,79,19,80,88,2,77,63,90,29,58,56,43,9,89,11,4,0,20,7,76,68,64,88,73,85,34,1,42},
					{69,25,1,75,24,69,8,7,4,2,2,36,19,27,56,2,76,32,9,85,3,60,51,46,4,4,84,58,22,9,44,100,49,1,34,0,32,58,19,45,71,89,63,40,13,28,8,4,84,55},
					{17,6,96,50,20,96,59,93,39,44,21,86,95,15,11,72,32,75,74,25,11,9,99,56,79,100,44,59,33,76,60,99,66,60,83,21,90,18,93,92,96,57,78,99,31,7,60,98,17,24},
					{80,24,71,26,29,10,1,29,65,72,53,22,60,10,37,56,64,31,22,46,65,94,2,52,6,94,41,72,34,41,90,86,95,73,70,31,62,100,1,76,26,69,34,43,55,2,55,81,26,6},
					{98,71,48,73,54,87,62,70,75,0,31,25,84,67,65,20,61,1,9,30,32,79,19,38,80,74,32,64,52,77,10,43,2,22,19,93,11,85,55,91,21,39,7,71,50,32,20,69,24,65},
					{70,43,51,48,94,70,6,46,21,49,62,78,3,62,40,44,40,42,30,9,63,33,81,8,100,73,53,54,37,89,67,88,12,46,60,43,77,87,58,81,98,7,12,49,98,35,12,68,96,98},
					{68,30,2,67,89,46,89,20,83,15,0,33,99,81,73,61,85,73,48,54,94,41,96,12,79,50,90,91,93,38,38,25,2,69,39,3,4,34,63,23,14,14,14,39,31,71,40,49,33,18},
					{97,32,11,90,65,46,53,40,9,95,4,9,93,25,9,11,14,78,53,97,35,70,0,82,94,61,19,6,40,10,93,24,3,65,67,96,66,87,84,78,81,84,6,93,100,75,57,23,93,80},
					{80,59,6,93,64,58,76,90,8,9,65,67,45,56,87,68,86,74,59,4,40,17,56,39,57,35,95,87,58,3,8,40,17,79,46,53,11,30,50,23,62,83,9,98,49,85,26,75,80,65},
					{64,70,1,48,66,43,88,61,16,37,96,82,79,11,47,35,15,0,80,96,83,84,79,32,63,94,70,86,4,2,21,30,74,95,9,2,50,49,99,89,25,46,17,94,38,76,38,73,2,34},
					{32,100,61,34,49,90,81,83,52,10,51,50,70,82,62,26,11,47,11,93,99,93,9,37,59,0,47,34,56,17,93,24,73,51,36,84,96,30,98,92,71,86,86,27,40,86,72,24,76,43},
					{89,65,36,94,40,66,93,98,94,38,4,63,77,1,61,39,16,17,54,57,33,83,89,99,42,91,38,62,86,99,44,20,78,13,56,13,58,45,89,71,88,41,28,53,72,55,31,12,32,30},
					{46,81,37,58,4,35,51,68,98,37,1,31,30,79,58,77,37,90,4,59,61,26,28,29,89,78,35,68,31,87,58,13,81,49,71,84,85,15,26,59,63,75,4,42,28,64,20,25,88,94},
					{2,94,81,67,29,9,73,22,57,57,67,7,63,41,60,80,93,29,48,81,40,5,96,2,58,10,8,92,50,47,50,70,78,54,38,58,40,61,73,39,15,41,87,2,53,65,22,90,97,76},
					{26,73,27,7,63,51,98,5,96,12,100,57,32,12,28,65,30,33,58,83,92,2,30,25,85,15,12,41,26,58,69,71,66,66,51,42,27,52,24,76,57,85,26,62,56,60,98,26,61,90},
					{69,79,53,41,2,19,64,60,10,80,47,34,4,71,45,68,9,3,24,40,57,73,81,56,27,25,83,73,34,76,20,39,83,66,53,51,8,51,83,8,27,73,80,36,89,32,34,39,54,94},
					{38,20,36,72,90,51,43,93,73,42,37,50,54,81,63,58,51,6,82,30,0,45,43,56,60,40,93,6,97,91,88,20,61,32,90,7,61,63,23,98,88,82,72,0,77,71,88,51,47,23},
					{9,96,65,75,64,44,69,2,68,47,52,1,15,68,29,10,47,96,60,56,45,5,84,24,73,38,49,11,14,61,16,66,98,75,82,47,99,8,73,84,89,72,65,0,81,96,70,36,79,89},
					{72,96,54,15,11,17,2,33,43,69,10,8,21,15,64,58,34,78,60,64,13,50,1,49,62,46,88,93,69,49,97,69,79,41,73,70,77,37,96,32,60,45,88,15,83,92,80,17,30,12},
					{60,25,77,47,34,72,7,89,77,50,57,23,96,94,53,47,84,89,19,38,71,9,52,32,48,52,0,40,37,44,66,63,99,35,32,69,87,82,16,1,59,53,83,28,44,35,64,77,48,88},
					{23,96,29,22,2,15,31,3,31,90,79,52,38,56,51,34,95,45,91,6,15,40,80,91,93,84,11,80,65,22,64,76,54,99,97,23,86,78,79,54,94,79,50,6,39,80,96,34,67,65},
					{70,75,100,73,62,66,51,91,44,93,51,1,62,79,3,21,19,86,10,5,78,16,100,59,72,71,48,41,69,39,85,32,74,98,87,10,96,31,62,8,100,73,19,47,83,31,92,95,32,11},
					{66,29,40,28,94,32,100,80,0,45,58,60,100,21,50,70,77,17,44,71,92,46,17,55,66,85,21,35,50,31,86,58,97,19,42,8,9,24,38,28,48,92,44,40,39,19,52,15,65,21},
					{73,60,22,75,78,37,28,82,57,94,55,51,52,45,74,16,98,22,61,40,29,45,19,88,80,24,2,88,57,28,33,31,11,51,72,24,67,58,62,1,61,59,51,88,36,48,84,77,89,76},
					{86,27,1,48,5,51,52,28,81,53,57,94,96,79,90,63,1,15,62,43,62,24,16,43,16,20,93,41,81,62,97,7,43,2,5,26,87,9,95,39,31,74,28,24,90,76,39,72,0,19},
					{44,74,28,36,96,30,43,62,60,14,46,70,49,7,96,90,60,1,49,26,33,60,21,45,37,100,71,69,80,66,38,33,48,20,6,87,82,72,56,24,63,64,49,60,1,57,2,67,4,9},
					{45,12,66,83,76,69,10,1,3,5,77,74,4,31,5,4,40,42,52,85,37,54,6,88,48,48,30,33,64,36,87,12,90,72,17,98,42,50,4,16,61,21,70,100,17,25,55,83,68,54},
					{57,75,19,43,98,13,14,61,75,10,20,60,59,48,10,49,73,93,27,49,98,15,19,0,61,82,80,35,59,35,8,12,78,94,5,8,81,36,67,49,3,63,29,22,69,25,57,5,63,40},
					{29,33,28,50,4,1,62,68,1,94,74,11,62,32,76,30,41,28,83,16,63,17,53,33,18,39,90,28,93,44,93,93,25,53,1,75,34,3,9,96,36,24,96,46,6,54,62,70,47,40},
					{10,43,10,2,17,77,30,5,80,42,100,98,56,62,7,49,16,67,70,23,31,21,48,18,16,72,17,71,13,21,62,15,39,5,96,69,45,43,37,72,20,69,44,24,97,36,14,45,85,87},
					{73,94,98,79,80,46,50,17,43,4,70,27,53,65,81,70,51,69,84,13,90,65,60,7,26,70,19,75,76,49,70,33,58,88,67,77,70,51,29,75,56,59,93,43,15,36,74,33,35,82},
					{47,37,85,58,66,1,49,22,84,90,52,42,46,96,43,45,8,51,66,9,2,42,49,31,61,69,38,90,55,89,22,3,26,99,69,35,89,56,41,91,41,91,37,31,86,21,53,63,28,80},
					{53,83,57,86,31,60,50,76,78,43,49,77,17,58,25,90,86,9,27,58,56,38,80,48,47,77,8,73,27,17,49,51,86,69,65,61,91,55,82,29,32,2,56,45,25,94,32,95,77,57},
					{34,85,32,37,78,1,97,27,6,10,4,50,35,52,2,72,55,4,53,70,13,73,63,51,48,7,47,31,23,87,51,0,22,87,3,53,57,25,12,23,90,77,65,50,48,33,32,56,70,50},
					{2,23,87,26,35,10,23,3,72,5,33,17,83,10,91,63,63,13,98,9,26,44,6,26,64,20,15,8,7,2,58,0,45,41,49,18,78,34,9,81,12,44,52,16,8,91,0,93,2,3},
					{58,59,54,63,35,78,18,1,16,72,76,64,5,14,82,16,17,9,54,65,49,25,45,0,8,74,62,64,45,30,70,61,84,40,70,64,61,98,92,7,41,90,95,40,87,68,16,5,36,50}
			},
	};
	Solution s;

	for (auto it = t.begin(); it != t.end(); it++)
		cout << s.cherryPickup(*it) << endl;

	return 0;
}
